# 本地开发说明

## 问题修复

已修复下载页面的 GitHub API 调用问题：

### 1. 创建了 GitHub API 代理函数
- 文件位置：`netlify/functions/github.js`
- 功能：代理 GitHub API 请求，避免 CORS 和权限问题
- 支持本地和线上两种路径格式

### 2. 修复了路径解析问题
- **问题**：原始代码无法正确处理 `/.netlify/functions/github/` 路径格式
- **解决**：更新路径解析逻辑，支持两种路径格式：
  - 本地：`/.netlify/functions/github/username/repo/endpoint`
  - 线上：`/api/github/username/repo/endpoint`

### 3. 更新了下载页面逻辑
- 自动检测本地/线上环境
- 本地使用：`/.netlify/functions/github/`
- 线上使用：`/api/github/`

### 4. 测试验证
- ✅ 本地部署：所有三个仓库的 API 调用都成功
- ✅ 路径解析：正确构建 GitHub API URL
- ✅ 错误处理：保持原有的重试机制

## 本地开发步骤

1. 安装依赖：
```bash
npm install
```

2. 启动本地开发服务器：
```bash
npm run dev
```

3. 访问：http://localhost:8888

## 部署说明

### Netlify 部署
1. 将代码推送到 GitHub
2. 在 Netlify 中连接仓库
3. 构建命令：`npm run build`
4. 发布目录：`/` (根目录)

### 环境变量
无需额外配置，GitHub API 代理函数会自动处理请求。

## 测试验证

1. 本地测试：访问下载页面，检查控制台是否有错误
2. 线上测试：部署后访问下载页面，验证下载链接是否正常

## 故障排除

如果仍然出现 403/404 错误：
1. 检查 GitHub 仓库名称是否正确
2. 确认仓库是公开的
3. 检查网络连接
4. 查看浏览器控制台的详细错误信息
