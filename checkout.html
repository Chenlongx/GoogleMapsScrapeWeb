<!DOCTYPE html>
<html data-theme="light" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title data-lang-en="Secure Checkout | LeadScout" data-lang-zh="å®‰å…¨æ”¯ä»˜ | LeadScout">
        Secure Checkout | LeadScout
    </title>
    <link href="assets/img/ico/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png" />
    <link href="assets/img/ico/favicon.svg" rel="icon" type="image/svg+xml" />
    <link href="assets/img/ico/favicon.ico" rel="shortcut icon" />
    <link href="assets/img/ico/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180" />
    <link href="assets/img/ico/site.webmanifest" rel="manifest" />
    <link href="./assets/css/style.css" rel="stylesheet" />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <script defer="" src="./assets/js/main.js">
    </script>
    <script defer="" src="./assets/js/referral-tracker.js">
    </script>
    <style>
        /* ===== é¡µé¢æ•´ä½“ä¸å¡ç‰‡åŸºç¡€æ ·å¼ (æ— å˜åŠ¨) ===== */
        .checkout-section {
            padding: 4rem 0;
            /* å‡å°ä¸Šä¸‹è¾¹è· */
            background-color: var(--background-color);
        }

        .product-card {
            background-color: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            /* ä¸ download.html ä¸€è‡´ */
            padding: 2rem;
            /* ä¸ download.html ä¸€è‡´ */
            text-align: center;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.07);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        html[data-theme="dark"] .product-card {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .product-card h2 {
            margin-bottom: 0.75rem;
            font-size: 1.8rem;
            color: var(--text-primary-color);
        }

        .product-card .plan-description {
            color: var(--text-secondary-color);
            margin-bottom: 1rem;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            line-height: 1.3;
        }

        .plan-selector {
            display: flex;
            background-color: var(--background-color);
            border-radius: 8px;
            padding: 0.25rem;
            border: 1px solid var(--border-color);
            margin-bottom: 1rem;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.04);
            min-height: 48px;
        }

        .plan-btn {
            flex: 1;
            background: transparent;
            border: none;
            padding: 0.7rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            color: var(--text-secondary-color);
            transition: all 0.2s ease;
        }

        .plan-btn.active {
            background: var(--primary-color);
            color: #fff;
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3);
        }

        /* ä¿ƒé”€æ ‡ç­¾æ ·å¼ */
        .promo-badge {
            background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
            color: #fff;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.95rem;
            text-align: center;
            margin-bottom: 1rem;
            animation: pulse 2s infinite;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.02);
            }
        }

        .promo-badge.hidden {
            display: none;
        }

        .product-price {
            font-size: 2.5rem;
            /* å‡å°ä»·æ ¼å­—å· */
            font-weight: 700;
            color: var(--text-primary-color);
            margin-bottom: 1.5rem;
        }

        .product-price .price-period {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-secondary-color);
            margin-left: 0.25rem;
        }

        .product-features {
            list-style: none;
            padding: 0;
            margin: 0 0 1.5rem;
            text-align: left;
            color: var(--text-secondary-color);
            flex-grow: 1;
            /* å¡«å……ç©ºé—´ï¼Œè®©æ“ä½œåŒºå¯¹é½ */
            border-top: 1px solid var(--border-color);
            padding-top: 1.5rem;
            /* ç§»é™¤ max-heightï¼Œè®©å¡ç‰‡è‡ªç„¶é«˜åº¦ */
            /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
            scrollbar-width: thin;
            scrollbar-color: var(--border-color) transparent;
        }

        .product-features::-webkit-scrollbar {
            width: 6px;
        }

        .product-features::-webkit-scrollbar-track {
            background: transparent;
        }

        .product-features::-webkit-scrollbar-thumb {
            background-color: var(--border-color);
            border-radius: 20px;
        }

        .product-features li {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        /* --- åº•éƒ¨æ“ä½œåŒºåŸŸ (Input + Button) --- */
        .card-action-area {
            margin-top: auto;
            /* æ¨åˆ°å¡ç‰‡åº•éƒ¨ï¼Œä¸ download.html ä¸€è‡´ */
            width: 100%;
        }

        .product-features .bx {
            color: var(--secondary-color);
            font-size: 1.25rem;
        }

        .product-card label {
            display: block;
            text-align: left;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary-color);
        }

        .product-card input {
            width: 100%;
            padding: 0.8rem 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
            background-color: var(--background-color);
            color: var(--text-primary-color);
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .product-card input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
            outline: none;
        }

        .secure-payment-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            color: var(--text-secondary-color);
            font-size: 0.9rem;
            margin-top: 1.5rem;
        }

        .secure-payment-badge .bx {
            color: var(--secondary-color);
        }

        .checkout-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            /* è‡ªåŠ¨å¡«å……ï¼Œä¸ download.html ä¸€è‡´ */
            gap: 2rem;
            max-width: 1500px;
            margin: 0 auto;
        }

        .product-card {
            background-color: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            /* ä¸ download.html ä¸€è‡´ */
            padding: 2rem;
            /* ä¸ download.html ä¸€è‡´ */
            text-align: center;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.07);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        @media (min-width: 768px) {
            .checkout-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1280px) {
            .checkout-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }


        /* --- æ–°è´­åŒºåŸŸçš„æ ‡é¢˜æ ·å¼ --- */
        .section-title {
            text-align: center;
            font-size: 1.8rem;
            color: var(--text-secondary-color);
            margin-bottom: 2.5rem;
            position: relative;
            display: block;
        }

        .section-title::before,
        .section-title::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 25%;
            height: 1px;
            background-color: var(--border-color);
        }

        @media (min-width: 768px) {

            .section-title::before,
            .section-title::after {
                width: 30%;
            }
        }

        .section-title::before {
            left: 0;
        }

        .section-title::after {
            right: 0;
        }

        /* --- å¼¹çª—æ ·å¼ (æ— å˜åŠ¨) --- */
        .modal {
            /* é»˜è®¤éšè—ï¼Œä½¿ç”¨ flex å¸ƒå±€ä½¿å…¶å­å…ƒç´ å¯ä»¥è½»æ¾å±…ä¸­ */
            display: flex;
            justify-content: center;
            align-items: center;

            /* å›ºå®šå®šä½ï¼Œè¦†ç›–æ•´ä¸ªå±å¹• */
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;

            /* åŠé€æ˜é»‘è‰²èƒŒæ™¯é®ç½© */
            background-color: rgba(15, 23, 42, 0.7);
            /* ä½¿ç”¨æ·±è‰²ç³»ä½œä¸ºèƒŒæ™¯ï¼Œå¹¶å¢åŠ é€æ˜åº¦ */
            backdrop-filter: blur(5px);
            /* æ·»åŠ æµè¡Œçš„æ¯›ç»ç’ƒæ•ˆæœ */
            -webkit-backdrop-filter: blur(5px);

            /* ç¡®ä¿åœ¨æœ€é¡¶å±‚ */
            z-index: 1000;

            /* ç”¨äºå®ç°æ·¡å…¥æ·¡å‡ºåŠ¨ç”» */
            opacity: 0;
            pointer-events: none;
            /* éšè—æ—¶ä¸å¯äº¤äº’ */
            transition: opacity 0.3s ease-in-out;
        }


        .modal.active {
            /* æ¿€æ´»æ—¶ï¼Œå˜ä¸ºå¯è§ä¸”å¯äº¤äº’ */
            opacity: 1;
            pointer-events: auto;
        }


        .modal-box {
            /* å¼¹çª—å†…å®¹ç›’å­ */
            background-color: var(--surface-color);
            /* ä½¿ç”¨ä¸»é¢˜å˜é‡ï¼Œé€‚é…æ·±è‰²æ¨¡å¼ */
            padding: 2.5rem;
            border-radius: 12px;
            /* æ›´å¤§çš„åœ†è§’ */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            /* æ›´æŸ”å’Œçš„é˜´å½± */
            text-align: center;
            max-width: 90%;
            /* åœ¨å°å±å¹•ä¸Šç•™å‡ºè¾¹è· */
            position: relative;

            /* å®ç°ä»ä¸Šå‘ä¸‹æ»‘å…¥çš„è½»å¾®åŠ¨æ•ˆ */
            transform: scale(0.95) translateY(-20px);
            transition: transform 0.3s ease-in-out;
        }

        .modal.active .modal-box {
            /* æ¿€æ´»æ—¶ï¼Œæ¢å¤åˆ°æ­£å¸¸ä½ç½®å’Œå¤§å° */
            transform: scale(1) translateY(0);
        }

        .modal-close-btn {
            /* å…³é—­æŒ‰é’® (X) */
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 2rem;
            line-height: 1;
            color: var(--text-secondary-color);
            cursor: pointer;
            transition: transform 0.2s ease, color 0.2s ease;
            z-index: 10;
        }

        .modal-close-btn:hover {
            color: var(--text-primary-color);
            transform: rotate(90deg);
            /* å¢åŠ æ—‹è½¬åŠ¨æ•ˆ */
        }

        #payment-box,
        #renewal-modal .modal-box {
            width: 400px;
        }

        #qrcode,
        #renewal-qrcode {
            margin: 1.5rem auto;
            padding: 0.5rem;
            background-color: #fff;
            border-radius: 8px;
            display: inline-block;
        }

        #success-box {
            width: 420px;
        }

        #success-box .icon {
            font-size: 4rem;
            color: var(--secondary-color);
        }

        #success-box h3 {
            font-size: 1.75rem;
            margin-top: 1rem;
            margin-bottom: 0.75rem;
        }

        #success-box .message {
            margin-bottom: 1.5rem;
        }


        #error-box .icon {
            font-size: 4rem;
            /* ä¿æŒå’ŒæˆåŠŸå›¾æ ‡ä¸€æ ·å¤§ */
            color: #ef4444;
            /* ä¸€ä¸ªé†’ç›®çš„çº¢è‰² */
        }

        #error-box h3 {
            font-size: 1.75rem;
            margin-top: 1rem;
            margin-bottom: 0.75rem;
        }

        #error-box .message {
            margin-bottom: 1.5rem;
        }

        #order-details {
            list-style: none;
            padding: 1rem 1.5rem;
            margin: 0 0 2rem 0;
            text-align: left;
            background-color: var(--background-color);
            /* ä½¿ç”¨æ›´æ·±çš„èƒŒæ™¯è‰²ä»¥åŒºåˆ† */
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        #order-details li {
            padding: 0.75rem 0;
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.95rem;
        }

        #order-details li:last-child {
            border-bottom: none;
        }

        /* --- å…¨èƒ½å¥—è£…æ‚¬æµ®æ æ ·å¼ --- */
        .bundle-float-container {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            /* åˆå§‹ä½ç½®åœ¨ä¸‹æ–¹ */
            width: 95%;
            max-width: 1000px;
            background: rgba(15, 23, 42, 0.95);
            /* æ·±è‰²èƒŒæ™¯ */
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            z-index: 9999;
            animation: slideUpFade 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.5s forwards;
            overflow: hidden;
        }

        /* é¡¶éƒ¨é‡‘è‰²æµå…‰è¾¹ (ä¼ªå…ƒç´ å®ç°) */
        .bundle-float-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #fbbf24, #f59e0b, #fbbf24, transparent);
            opacity: 0.8;
            pointer-events: none;
        }

        .bundle-content {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .bundle-icon-wrapper {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            width: 56px;
            height: 56px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
            flex-shrink: 0;
        }

        .bundle-icon-wrapper i {
            color: white;
            font-size: 2rem;
        }

        .bundle-text h3 {
            color: #fff;
            margin: 0 0 0.25rem 0;
            font-size: 1.25rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .bundle-tag {
            background: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
            font-size: 0.75rem;
            padding: 0.1rem 0.6rem;
            border-radius: 20px;
            border: 1px solid rgba(245, 158, 11, 0.3);
            text-transform: uppercase;
            font-weight: 800;
        }

        .bundle-text p {
            color: #94a3b8;
            margin: 0;
            font-size: 0.9rem;
        }

        .bundle-action {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            flex-shrink: 0;
        }

        .bundle-price {
            text-align: right;
        }

        .bundle-price .price-val {
            color: #fbbf24;
            /* é‡‘è‰²ä»·æ ¼ */
            font-size: 1.75rem;
            font-weight: 800;
            line-height: 1;
            text-shadow: 0 2px 10px rgba(251, 191, 36, 0.2);
        }

        .bundle-price .price-period {
            color: #64748b;
            font-size: 0.85rem;
        }

        .btn-bundle {
            background: linear-gradient(135deg, #f59e0b 0%, #ea580c 100%);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(234, 88, 12, 0.4);
            white-space: nowrap;
        }

        .btn-bundle:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(234, 88, 12, 0.5);
            filter: brightness(1.1);
        }

        @keyframes slideUpFade {
            to {
                transform: translateX(-50%) translateY(0);
            }
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .bundle-float-container {
                flex-direction: column;
                padding: 1.25rem;
                bottom: 1rem;
                gap: 1.25rem;
                width: 92%;
                border-radius: 16px;
                text-align: center;
            }

            .bundle-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .bundle-text h3 {
                justify-content: center;
                flex-wrap: wrap;
                /* å…è®¸æ ‡ç­¾æ¢è¡Œ */
                font-size: 1.1rem;
            }

            .bundle-text p {
                font-size: 0.85rem;
                opacity: 0.9;
            }

            .bundle-action {
                width: 100%;
                justify-content: space-between;
                /* ä»·æ ¼å’ŒæŒ‰é’®å·¦å³åˆ†å¸ƒ */
                padding-top: 1rem;
                border-top: 1px solid rgba(255, 255, 255, 0.05);
            }

            .bundle-price {
                text-align: left;
            }

            .bundle-price .price-val {
                font-size: 1.5rem;
            }

            .btn-bundle {
                padding: 0.7rem 1.5rem;
                font-size: 0.95rem;
            }
        }
    </style>
</head>

<body>
    <header class="main-header" id="main-header">
    </header>
    <main>
        <section class="page-header">
            <div class="container">
                <h1 data-lang-en="Secure Checkout Center" data-lang-zh="å®‰å…¨æ”¯ä»˜ä¸­å¿ƒ">
                    Secure Checkout Center
                </h1>
                <p data-lang-en="We use industry-leading encryption to secure every payment."
                    data-lang-zh="æˆ‘ä»¬é‡‡ç”¨è¡Œä¸šé¢†å…ˆçš„åŠ å¯†æŠ€æœ¯ï¼Œä¿éšœæ‚¨çš„æ¯ä¸€æ¬¡æ”¯ä»˜å®‰å…¨ã€‚">
                    We use industry-leading encryption to secure every payment.
                </p>
            </div>
        </section>
        <section class="checkout-section">
            <div class="container">
                <h2 class="section-title" data-lang-en="Purchase a License" data-lang-zh="è´­ä¹°æˆæƒè®¸å¯">
                    Purchase a License
                </h2>
                <div class="checkout-grid">
                    <div class="product-card" id="gmaps-card">
                        <h2 data-lang-en="Google Maps Scraper" data-lang-zh="Global Merchant Helper">
                            Google Maps Scraper
                        </h2>
                        <p class="plan-description" data-lang-en="Flexible billing options" data-lang-zh="çµæ´»çš„è®¡è´¹æ–¹å¼">
                            Flexible billing options
                        </p>
                        <div class="plan-selector">
                            <button class="plan-btn" data-lang-en="Monthly" data-lang-zh="æŒ‰æœˆ" data-plan="monthly"
                                data-price="7.00" data-price-cny="49.00">
                                Monthly
                            </button>
                            <button class="plan-btn" data-lang-en="Quarterly" data-lang-zh="æŒ‰å­£" data-plan="quarterly"
                                data-price="21.00" data-price-cny="148.00">
                                Quarterly
                            </button>
                            <button class="plan-btn active" data-lang-en="Yearly" data-lang-zh="æŒ‰å¹´" data-plan="yearly"
                                data-price="71.00" data-price-cny="499.00">
                                Yearly
                            </button>
                        </div>
                        <div class="product-price" data-price-en="$71" data-price-zh="Â¥499">
                            Â¥499
                            <span class="price-period" data-lang-en="/year" data-lang-zh="/å¹´">
                                /å¹´
                            </span>
                        </div>
                        <ul class="product-features">
                        </ul>
                        <div class="card-action-area">
                            <label data-lang-en="Enter account email to activate" data-lang-zh="è¾“å…¥æ‚¨è¦å¼€é€šçš„è´¦æˆ·é‚®ç®±"
                                for="gmaps_email">
                                Enter account email to activate
                            </label>
                            <input id="gmaps_email" placeholder="your-account@example.com" required="" type="email" />
                            <button class="btn btn-primary" data-product-id="gmaps" data-lang-en="Subscribe Now"
                                data-lang-zh="ç«‹å³å¼€é€š">
                                ç«‹å³å¼€é€š
                            </button>
                            <div class="secure-payment-badge">
                                <i class="bx bxs-lock-alt">
                                </i>
                                <span data-lang-en="Secure Payment via PayPal" data-lang-zh="æ”¯ä»˜å®/PayPal å®‰å…¨æ”¯ä»˜">
                                    Secure Payment via PayPal
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="product-card" id="validator-card">
                        <h2 data-lang-en="MailPro Email Marketing Master" data-lang-zh="MailProé‚®ä»¶è¥é”€å¤§å¸ˆ">
                            MailPro Email Marketing Master
                        </h2>
                        <p class="plan-description" data-lang-en="Annual subscription, powerful features"
                            data-lang-zh="æŒ‰å¹´æ”¶è´¹ï¼ŒåŠŸèƒ½å¼ºå¤§">
                            Annual subscription, powerful features
                        </p>
                        <div class="plan-selector"
                            style="visibility: hidden; pointer-events: none; border: none; box-shadow: none;">
                            <!-- ä»…é«˜çº§ç‰ˆï¼Œéšè—é€‰æ‹©å™¨ -->
                        </div>
                        <div class="product-price" data-price-en="$71" data-price-zh="Â¥499">
                            Â¥499
                            <span class="price-period" data-lang-en="/year" data-lang-zh="/å¹´">
                                /å¹´
                            </span>
                        </div>
                        <ul class="product-features">
                            <li><i class="bx bx-check"></i> <span data-lang-en="Bulk Email Sending"
                                    data-lang-zh="æ‰¹é‡é‚®ä»¶ç¾¤å‘">æ‰¹é‡é‚®ä»¶ç¾¤å‘</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Smart Template Editor"
                                    data-lang-zh="æ™ºèƒ½æ¨¡æ¿ç¼–è¾‘å™¨">æ™ºèƒ½æ¨¡æ¿ç¼–è¾‘å™¨</span></li>
                            <li><i class="bx bx-check"></i> <span
                                    data-lang-en="Advanced variable detection avoidance (works with platforms like QQ Mail, 163 Mail, Outlook, etc.)"
                                    data-lang-zh="é«˜çº§å˜é‡é˜²æ£€æµ‹ï¼ˆè¿‡å›½å¤–ä¼ä¸šé‚®ç®±ã€QQé‚®ç®±ã€163é‚®ç®±ã€outlookç­‰å¹³å°ï¼‰">é«˜çº§å˜é‡é˜²æ£€æµ‹ï¼ˆè¿‡å›½å¤–ä¼ä¸šé‚®ç®±ã€QQé‚®ç®±ã€163é‚®ç®±ã€outlookç­‰å¹³å°ï¼‰</span>
                            </li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Multi-account Management"
                                    data-lang-zh="å¤šè´¦å·ç®¡ç†">å¤šè´¦å·ç®¡ç†</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Email Tracking Analytics"
                                    data-lang-zh="é‚®ä»¶è¿½è¸ªåˆ†æ">é‚®ä»¶è¿½è¸ªåˆ†æ</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Anti-spam Optimization"
                                    data-lang-zh="é˜²åƒåœ¾é‚®ä»¶ä¼˜åŒ–">é˜²åƒåœ¾é‚®ä»¶ä¼˜åŒ–</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Scheduled Sending"
                                    data-lang-zh="å®šæ—¶å‘é€">å®šæ—¶å‘é€</span></li>
                        </ul>
                        <div class="card-action-area">
                            <label data-lang-en="Enter email to receive license key" data-lang-zh="è¾“å…¥æ¥æ”¶æ¿€æ´»ç çš„é‚®ç®±"
                                for="validator_email">
                                Enter email to receive license key
                            </label>
                            <input id="validator_email" placeholder="your-email@example.com" required="" type="email" />
                            <button class="btn btn-primary" data-product-id="validator">
                                è´­ä¹°é«˜çº§ç‰ˆæ¿€æ´»ç 
                            </button>
                            <div class="secure-payment-badge">
                                <i class="bx bxs-lock-alt">
                                </i>
                                <span data-lang-en="Secure Payment via PayPal" data-lang-zh="æ”¯ä»˜å®å®‰å…¨æ”¯ä»˜">
                                    Secure Payment via PayPal
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="product-card" id="whatsapp-validator-card">
                        <h2 data-lang-en="WhatsApp Marketing Assistant" data-lang-zh="WhatsApp æ™ºèƒ½è¥é”€åŠ©æ‰‹">
                            WhatsApp Marketing Assistant
                        </h2>
                        <p class="plan-description" data-lang-en="Annual subscription, all-in-one marketing"
                            data-lang-zh="æŒ‰å¹´æ”¶è´¹ï¼Œä¸€ç«™å¼è¥é”€">
                            Annual subscription, all-in-one marketing
                        </p>
                        <div class="plan-selector"
                            style="visibility: hidden; pointer-events: none; border: none; box-shadow: none;">
                            <!-- ä»…é«˜çº§ç‰ˆï¼Œéšè—é€‰æ‹©å™¨ -->
                        </div>
                        <div class="product-price" data-price-en="$71" data-price-zh="Â¥499">
                            Â¥499
                            <span class="price-period" data-lang-en="/year" data-lang-zh="/å¹´">
                                /å¹´
                            </span>
                        </div>
                        <ul class="product-features">
                            <li><i class="bx bx-check"></i> <span data-lang-en="Bulk WhatsApp Messaging"
                                    data-lang-zh="æ‰¹é‡WhatsAppç¾¤å‘">æ‰¹é‡WhatsAppç¾¤å‘</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Number Validation"
                                    data-lang-zh="å·ç æœ‰æ•ˆæ€§éªŒè¯">å·ç æœ‰æ•ˆæ€§éªŒè¯</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Multi-account Support"
                                    data-lang-zh="å¤šè´¦å·æ”¯æŒ">å¤šè´¦å·æ”¯æŒ</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Message Templates"
                                    data-lang-zh="æ¶ˆæ¯æ¨¡æ¿ç®¡ç†">æ¶ˆæ¯æ¨¡æ¿ç®¡ç†</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Auto Reply"
                                    data-lang-zh="è‡ªåŠ¨å›å¤">è‡ªåŠ¨å›å¤</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Contact Management"
                                    data-lang-zh="è”ç³»äººç®¡ç†">è”ç³»äººç®¡ç†</span></li>
                        </ul>
                        <div class="card-action-area">
                            <label data-lang-en="Enter email to receive license key" data-lang-zh="è¾“å…¥æ¥æ”¶æ¿€æ´»ç çš„é‚®ç®±"
                                for="whatsapp_validator_email">
                                Enter email to receive license key
                            </label>
                            <input id="whatsapp_validator_email" placeholder="your-email@example.com" required=""
                                type="email" />
                            <button class="btn btn-primary" data-product-id="whatsapp-validator">
                                è´­ä¹°é«˜çº§ç‰ˆæ¿€æ´»ç 
                            </button>
                            <div class="secure-payment-badge">
                                <i class="bx bxs-lock-alt">
                                </i>
                                <span data-lang-en="Secure Payment via PayPal" data-lang-zh="æ”¯ä»˜å®å®‰å…¨æ”¯ä»˜">
                                    Secure Payment via PayPal
                                </span>
                            </div>
                        </div>
                    </div>
                    <!-- è°·æ­Œæ’ä»¶è·å®¢äº§å“ -->
                    <div class="product-card" id="google-plugin-card">
                        <h2 data-lang-en="Google Plugin Lead Gen" data-lang-zh="è°·æ­Œæ’ä»¶è·å®¢">
                            è°·æ­Œæ’ä»¶è·å®¢
                        </h2>
                        <p class="plan-description" data-lang-en="Smart Chrome extension for lead generation"
                            data-lang-zh="æ™ºèƒ½Chromeæ’ä»¶ï¼Œé«˜æ•ˆè·å®¢">
                            æ™ºèƒ½Chromeæ’ä»¶ï¼Œé«˜æ•ˆè·å®¢
                        </p>
                        <!-- ä½¿ç”¨ç©ºçš„é€æ˜é€‰æ‹©å™¨å ä½ï¼Œä½†ä¸ä½¿ç”¨ buttonï¼Œçº¯ CSS å ä½ -->
                        <div class="plan-selector"
                            style="visibility: hidden; pointer-events: none; border: none; box-shadow: none;">
                            <!-- ä¿æŒé«˜åº¦ä¸€è‡´ -->
                        </div>
                        <div class="product-price" data-price-en="$42" data-price-zh="Â¥299">
                            Â¥299
                            <span class="price-period" data-lang-en="/year" data-lang-zh="/å¹´">
                                /å¹´
                            </span>
                        </div>
                        <ul class="product-features">
                            <li><i class="bx bx-check"></i> <span data-lang-en="Social Media Lead Generation"
                                    data-lang-zh="ç¤¾åª’å…¬å¼åŒ–å¹³å°æ‹“å®¢ï¼ˆfecbookã€linkedinã€twitterã€whatsappã€">ç¤¾åª’å…¬å¼åŒ–å¹³å°æ‹“å®¢ï¼ˆfecbookã€linkedinã€twitterã€whatsappï¼‰</span>
                            </li>
                            <li><i class="bx bx-check"></i> <span
                                    data-lang-en="Fully automated Google verification, 24/7 uninterrupted service."
                                    data-lang-zh="è‡ªåŠ¨è¿‡è°·æ­ŒéªŒè¯ï¼Œ7*24å°æ—¶ä¸é—´æ–­">è‡ªåŠ¨è¿‡è°·æ­ŒéªŒè¯ï¼Œ7*24å°æ—¶ä¸é—´æ–­</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Smart Lead Discovery"
                                    data-lang-zh="æ™ºèƒ½çº¿ç´¢å‘ç°">æ™ºèƒ½çº¿ç´¢å‘ç°</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="One-click Data Export"
                                    data-lang-zh="ä¸€é”®å¯¼å‡ºæ•°æ®">ä¸€é”®å¯¼å‡ºæ•°æ®</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Multi-platform Support"
                                    data-lang-zh="å¤šå¹³å°æ”¯æŒ">å¤šå¹³å°æ”¯æŒ</span></li>
                            <li><i class="bx bx-check"></i> <span data-lang-en="Regular Updates"
                                    data-lang-zh="å®šæœŸæ›´æ–°ç»´æŠ¤">å®šæœŸæ›´æ–°ç»´æŠ¤</span></li>
                        </ul>
                        <div class="card-action-area">
                            <div class="promo-badge" data-lang-en="ğŸ“ Contact Customer Service to Purchase"
                                data-lang-zh="ğŸ“ è´­ä¹°æ–¹å¼ï¼šè”ç³»å®¢æœ">
                                ğŸ“ è´­ä¹°æ–¹å¼ï¼šè”ç³»å®¢æœ
                            </div>
                            <button class="btn btn-secondary" id="contact-plugin-btn" data-lang-en="Contact Us"
                                data-lang-zh="è”ç³»å®¢æœè´­ä¹°">
                                è”ç³»å®¢æœè´­ä¹°
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="trust-section">
        </section>
        <div class="modal" id="payment-modal">
            <div class="modal-box" id="payment-box">
                <button aria-label="Close" class="modal-close-btn" id="modal-close-btn">
                    Ã—
                </button>
                <p data-lang-en="Please use Alipay to scan and pay" data-lang-zh="è¯·ä½¿ç”¨æ”¯ä»˜å®æ‰«ç æ”¯ä»˜">
                    Please use Alipay to scan and pay
                </p>
                <div id="qrcode">
                </div>
                <p data-lang-en="Waiting for payment..." data-lang-zh="ç­‰å¾…æ”¯ä»˜ä¸­..." id="payment-status">
                    Waiting for payment...
                </p>
                <p id="payment-timer" style="font-size: 0.9rem; color: var(--text-secondary-color);">
                </p>
            </div>
        </div>
        <div class="modal" id="success-modal">
            <div class="modal-box" id="success-box">
                <button aria-label="Close" class="modal-close-btn" id="success-close-btn">
                    Ã—
                </button>
                <i class="bx bxs-check-circle icon">
                </i>
                <h3 data-lang-en="Payment Successful" data-lang-zh="æ”¯ä»˜æˆåŠŸ">
                    Payment Successful
                </h3>
                <p class="message" data-lang-en="Your order has been processed. Details have been sent to your email."
                    data-lang-zh="æ‚¨çš„è®¢å•å·²å¤„ç†å®Œæ¯•ï¼Œç›¸å…³ä¿¡æ¯å·²å‘é€è‡³æ‚¨çš„é‚®ç®±ã€‚">
                    Your order has been processed. Details have been sent to your email.
                </p>
                <ul id="order-details">
                </ul>
                <button class="btn btn-primary" data-lang-en="Confirm" data-lang-zh="å¥½çš„" id="success-confirm-btn">
                    Confirm
                </button>
            </div>
        </div>
        <div class="modal" id="renewal-modal">
            <div class="modal-box" id="renewal-box">
                <button aria-label="Close" class="modal-close-btn" id="renewal-close-btn">
                    Ã—
                </button>
                <p data-lang-en="Please use Alipay to scan and renew" data-lang-zh="è¯·ä½¿ç”¨æ”¯ä»˜å®æ‰«ç ç»­è´¹">
                    Please use Alipay to scan and renew
                </p>
                <div id="renewal-qrcode">
                </div>
                <p data-lang-en="Waiting for payment..." data-lang-zh="ç­‰å¾…æ”¯ä»˜ä¸­..." id="renewal-status">
                    Waiting for payment...
                </p>
                <p id="renewal-timer" style="font-size: 0.9rem; color: var(--text-secondary-color);">
                </p>
            </div>
        </div>
        <div class="modal" id="error-modal">
            <div class="modal-box" id="error-box">
                <button aria-label="Close" class="modal-close-btn" id="error-close-btn">
                    Ã—
                </button>
                <i class="bx bxs-x-circle icon">
                </i>
                <h3 data-lang-en="Operation Failed" data-lang-zh="æ“ä½œå¤±è´¥">
                    Operation Failed
                </h3>
                <p class="message" id="error-message">
                </p>
                <button class="btn btn-primary" data-lang-en="OK" data-lang-zh="å¥½çš„" id="error-confirm-btn">
                    OK
                </button>
            </div>
        </div>
    </main>
    <footer class="main-footer" id="main-footer">
    </footer>
    <!-- å…¨èƒ½å¥—è£…æ‚¬æµ®æ  -->
    <div class="bundle-float-container">
        <div class="bundle-content">
            <div class="bundle-icon-wrapper">
                <i class='bx bxs-crown'></i>
            </div>
            <div class="bundle-text">
                <h3 data-lang-en="All-In-One Ultimate Bundle" data-lang-zh="å…¨èƒ½ç»ˆæå¥—è£… Â· ä¼ä¸šç‰ˆ">
                    All-In-One Ultimate Bundle <span class="bundle-tag">Best Value</span>
                </h3>
                <p data-lang-en="Access all 4 tools + VIP Priority Support + Unlimited Updates"
                    data-lang-zh="ä¸€æ¬¡è§£é”å…¨ç«™4æ¬¾å·¥å…· + VIPä¸“å±å®¢æœ + æ°¸ä¹…ä¼˜å…ˆæ›´æ–°">
                    Access all 4 tools + VIP Priority Support + Unlimited Updates
                </p>
            </div>
        </div>
        <div class="bundle-action">
            <div class="bundle-price">
                <span class="price-val" data-lang-en="$571" data-lang-zh="Â¥1888">Â¥1888</span>
                <span class="price-period" data-lang-en="/year" data-lang-zh="/å¹´">/å¹´</span>
            </div>
            <button class="btn-bundle" data-product-id="bundle_all" data-price="1888.00" data-lang-en="Upgrade Now"
                data-lang-zh="ç«‹å³å¼€é€š">
                Upgrade Now
            </button>
        </div>
    </div>

    <div class="floating-contact-container">
        <button aria-label="Contact Us" class="contact-fab" id="contact-fab">
            <i class="bx bxs-message-dots">
            </i>
        </button>
    </div>
    <div class="modal-container" id="contact-modal-container">
        <div class="modal-content">
            <button aria-label="Close" class="modal-close-btn" id="contact-modal-close-btn">
                Ã—
            </button>
            <h2 data-lang-en="Contact Us" data-lang-zh="è”ç³»æˆ‘ä»¬">
                è”ç³»æˆ‘ä»¬
            </h2>
            <div class="contact-channels">
                <div class="contact-channel">
                    <i class="bx bxl-whatsapp">
                    </i>
                    <h3 data-lang-en="WhatsApp" data-lang-zh="WhatsApp">
                        WhatsApp
                    </h3>
                    <a class="btn btn-secondary" href="https://wa.me/8619189026051" target="_blank">
                        +8619189026051
                    </a>
                </div>
                <div class="contact-channel">
                    <i class="bx bxl-weixin">
                    </i>
                    <h3 data-lang-en="WeChat Support" data-lang-zh="å¾®ä¿¡å®¢æœ">
                        å¾®ä¿¡å®¢æœ
                    </h3>
                    <img alt="å¾®ä¿¡äºŒç»´ç " class="qr-code" src="assets/img/wechat.png" />
                    <p data-lang-en="Scan QR to Add" data-lang-zh="æ‰«ç æ·»åŠ å¥½å‹">
                        æ‰«ç æ·»åŠ å¥½å‹
                    </p>
                </div>
                <div class="contact-channel">
                    <i class="bx bxl-qq">
                    </i>
                    <h3 data-lang-en="QQ Support" data-lang-zh="QQå®¢æœ">
                        QQå®¢æœ
                    </h3>
                    <img alt="QQäºŒç»´ç " class="qr-code" src="assets/img/qqchat.jpg" />
                    <p data-lang-en="Scan QR to Add" data-lang-zh="æ‰«ç æ·»åŠ å¥½å‹">
                        æ‰«ç æ·»åŠ å¥½å‹
                    </p>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator/qrcode.js">
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ===================================================================
            // 1. å…¨å±€å¸¸é‡å’Œé…ç½®
            // ===================================================================
            let backendUrl;
            // æ£€æŸ¥å½“å‰é¡µé¢çš„ä¸»æœºåæ˜¯å¦ä¸º localhost æˆ– 127.0.0.1
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' || window.location.port === '8888') {
                // å¦‚æœæ˜¯ï¼Œåˆ™æˆ‘ä»¬å¤„äºæœ¬åœ°å¼€å‘ç¯å¢ƒ
                backendUrl = 'http://localhost:5001/.netlify/functions/';
                console.log('æ£€æµ‹åˆ°æœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œåç«¯APIè·¯å¾„è®¾ç½®ä¸º:', backendUrl);
            } else {
                // å¦åˆ™ï¼Œæˆ‘ä»¬å¤„äºå·²éƒ¨ç½²çš„ç”Ÿäº§ç¯å¢ƒ
                // ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè®© Netlify è‡ªåŠ¨å¤„ç†åŸŸå
                backendUrl = '/.netlify/functions/';
                console.log('æ£€æµ‹åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œåç«¯APIè·¯å¾„è®¾ç½®ä¸º:', backendUrl);
            }
            const USD_TO_CNY_RATE = 7.0;

            const plans = {
                gmaps: {
                    monthly: {
                        price: '7',      // USD (49/7)
                        price_cny: '49',  // CNY (588/12)
                        features_zh: [
                            'æ— é™æ•°æ®',
                            'ä¼˜å…ˆæŠ€æœ¯æ”¯æŒ',
                            'æ— é™å¯¼å‡º',
                            'å®Œæ•´å•†æˆ·ä¿¡æ¯æŠ“å–',
                            'é‚®ç®±å’Œç”µè¯æå–',
                            'å¤šæ ¼å¼æ•°æ®å¯¼å‡º'
                        ],
                        features_en: [
                            'Unlimited Records',
                            'Priority Support',
                            'Unlimited Export',
                            'Complete Business Info Scraping',
                            'Email & Phone Extraction',
                            'Multi-format Data Export'
                        ],
                        period_zh: '/æœˆ',
                        period_en: '/mo',
                        showPromo: false
                    },
                    quarterly: {
                        price: '21',      // USD (147/7)
                        price_cny: '147', // CNY (588/4)
                        features_zh: [
                            'æ— é™æ•°æ®',
                            '<strong>ä¼˜å…ˆ</strong>æŠ€æœ¯æ”¯æŒ',
                            'æ— é™å¯¼å‡º',
                            'å®Œæ•´å•†æˆ·ä¿¡æ¯æŠ“å–',
                            'é‚®ç®±å’Œç”µè¯æå–',
                            'å¤šæ ¼å¼æ•°æ®å¯¼å‡º'
                        ],
                        features_en: [
                            'Unlimited Records',
                            '<strong>Priority</strong> Support',
                            'Unlimited Export',
                            'Complete Business Info Scraping',
                            'Email & Phone Extraction',
                            'Multi-format Data Export'
                        ],
                        period_zh: '/å­£',
                        period_en: '/quarter',
                        showPromo: false
                    },
                    yearly: {
                        price: '84.00',     // USD (588/7)
                        price_cny: '588.00', // 588CNY
                        features_zh: [
                            'æ— é™æ•°æ®',
                            '<strong>ä¸“å±</strong>æŠ€æœ¯æ”¯æŒ',
                            'æ— é™å¯¼å‡º',
                            'å®Œæ•´å•†æˆ·ä¿¡æ¯æŠ“å–',
                            'é‚®ç®±å’Œç”µè¯æå–',
                            'å¤šæ ¼å¼æ•°æ®å¯¼å‡º',
                            'æ‰¹é‡åœ°åŒºæœç´¢'
                        ],
                        features_en: [
                            'Unlimited Records',
                            '<strong>Dedicated</strong> Support',
                            'Unlimited Export',
                            'Complete Business Info Scraping',
                            'Email & Phone Extraction',
                            'Multi-format Data Export',
                            'Bulk Region Search'
                        ],
                        period_zh: '/å¹´',
                        period_en: '/year',
                        showPromo: false
                    }
                },
                validator: {
                    standard: {
                        price: '89.00',      // USD (625/7)
                        price_cny: '625.00', // CNY (1250/2)
                        features_zh: [
                            'å…¨åŠŸèƒ½éªŒè¯',
                            'æˆæƒ <strong>1</strong> å°è®¾å¤‡',
                            'æ™ºèƒ½æœé‚®åŠŸèƒ½',
                            'é‚®ç®±æ£€æµ‹å·¥å…·'
                        ],
                        features_en: [
                            'All Features',
                            'License for <strong>1</strong> Device',
                            'Smart Email Search',
                            'Email Validation Tool'
                        ],
                        period_zh: '/å¹´',
                        period_en: '/year'
                    },
                    premium: {
                        price: '178.00',      // USD (1250/7)
                        price_cny: '1250.00', // CNY
                        features_zh: [
                            'å…¨åŠŸèƒ½éªŒè¯',
                            '<strong>ä¼˜å…ˆ</strong>æŠ€æœ¯æ”¯æŒ',
                            'æˆæƒ <strong>3</strong> å°è®¾å¤‡',
                            'é«˜çº§é‚®ç®±éªŒè¯',
                            'æ‰¹é‡å¤„ç†åŠŸèƒ½',
                            'è¯¦ç»†éªŒè¯æŠ¥å‘Š'
                        ],
                        features_en: [
                            'All Features',
                            '<strong>Priority</strong> Support',
                            'License for <strong>3</strong> Devices',
                            'Advanced Email Validation',
                            'Batch Processing Features',
                            'Detailed Validation Reports'
                        ],
                        period_zh: '/å¹´',
                        period_en: '/year'
                    }
                },
                'whatsapp-validator': {
                    standard: {
                        price: '89.00',      // USD (625/7)
                        price_cny: '625.00', // CNY (1250/2)
                        features_zh: [
                            'WhatsAppå·ç éªŒè¯',
                            'æ‰¹é‡å·ç æ£€æµ‹',
                            'åŸºç¡€æ¶ˆæ¯ç¾¤å‘',
                            'åŸºç¡€ç­›é€‰åŠŸèƒ½'
                        ],
                        features_en: [
                            'WhatsApp Number Validation',
                            'Bulk Number Detection',
                            'Basic Message Broadcasting',
                            'Basic Filtering'
                        ],
                        period_zh: '/å¹´',
                        period_en: '/year'
                    },
                    premium: {
                        price: '178.00',     // USD (1250/7)
                        price_cny: '1250.00', // CNY
                        features_zh: [
                            'WhatsAppå·ç éªŒè¯',
                            'æ™ºèƒ½æ¶ˆæ¯ç¾¤å‘',
                            'æ¶ˆæ¯ä¸­å¿ƒç®¡ç†',
                            '<strong>ä¸“å±</strong>æŠ€æœ¯æ”¯æŒ',
                            'å¤šè´¦å·ç®¡ç†',
                            'æ•æ„Ÿè¯æ£€æµ‹',
                            'å¤šæ ¼å¼å¯¼å…¥å¯¼å‡º'
                        ],
                        features_en: [
                            'WhatsApp Number Validation',
                            'Smart Message Broadcasting',
                            'Message Center Management',
                            '<strong>Dedicated</strong> Technical Support',
                            'Multi-Account Management',
                            'Sensitive Word Detection',
                            'Multi-format Import/Export'
                        ],
                        period_zh: '/å¹´',
                        period_en: '/year'
                    }
                }
            };

            let statusInterval, paymentTimeout, countdownInterval;

            // ===================================================================
            // 2. æ ¸å¿ƒæ”¯ä»˜ä¸å¼¹çª—å¤„ç†å‡½æ•°
            // ===================================================================

            function stopAllTimers() {
                if (statusInterval) clearInterval(statusInterval);
                if (paymentTimeout) clearTimeout(paymentTimeout);
                if (countdownInterval) clearInterval(countdownInterval);
            }

            function closeAllModals() {
                document.querySelectorAll('.modal').forEach(modal => modal.classList.remove('active'));
            }

            function openErrorModal(message) {
                document.getElementById('error-message').textContent = message;
                document.getElementById('error-modal').classList.add('active');
            }


            function openSuccessModal(details) {
                const lang = document.documentElement.lang.startsWith('zh') ? 'zh' : 'en';
                const orderDetailsEl = document.getElementById('order-details');

                let productName = '';
                let planText = '';
                const productId = details.product; // æ¥æ”¶å®Œæ•´çš„ productId

                if (productId.includes('renewal')) {
                    productName = lang === 'zh' ? 'Global Merchant Helper - ç»­è´¹' : 'Google Maps Scraper - Renewal';
                    const durationMap = { monthly: 'æœˆåº¦', quarterly: 'å­£åº¦', yearly: 'å¹´åº¦' };
                    const durationMapEn = { monthly: 'Monthly', quarterly: 'Quarterly', yearly: 'Yearly' };
                    planText = lang === 'zh' ? durationMap[details.plan] || details.plan : durationMapEn[details.plan] || details.plan;
                } else {
                    const productMap = {
                        gmaps: { zh: 'Global Merchant Helper', en: 'Google Maps Scraper' },
                        validator: { zh: 'é‚®ç®±æ‰¹é‡éªŒè¯å™¨', en: 'Email Validator' },
                        'whatsapp-validator': { zh: 'WhatsApp æ™ºèƒ½è¥é”€åŠ©æ‰‹', en: 'WhatsApp Marketing Assistant' }
                    };
                    const productBase = productId.split('_')[0];
                    productName = productMap[productBase] ? productMap[productBase][lang] : 'Unknown Product';
                    planText = lang === 'zh' ? (details.plan === 'premium' ? 'é«˜çº§ç‰ˆ' : 'æ ‡å‡†ç‰ˆ') : (details.plan.charAt(0).toUpperCase() + details.plan.slice(1));
                }

                orderDetailsEl.innerHTML = `
                    <li><span>${lang === 'zh' ? 'è®¢å•å·' : 'Order ID'}</span><span>${details.orderId}</span></li>
                    <li><span>${lang === 'zh' ? 'äº§å“åç§°' : 'Product'}</span><span>${productName} (${planText})</span></li>
                    <li><span>${lang === 'zh' ? 'æ”¯ä»˜é‡‘é¢' : 'Amount'}</span><span>Â¥ ${details.price}</span></li>
                    <li><span>${lang === 'zh' ? 'æ¿€æ´»/ç»­è´¹é‚®ç®±' : 'Email'}</span><span>${details.email}</span></li>
                `;
                document.getElementById('success-modal').classList.add('active');
            }

            async function processPayment(productId, email, modalElements, referralCode = null, agentCode = null) {
                stopAllTimers();

                modalElements.qrcodeContainer.innerHTML = 'æ­£åœ¨ç”ŸæˆäºŒç»´ç ...';
                modalElements.statusEl.textContent = 'ç­‰å¾…æ”¯ä»˜ä¸­...';
                modalElements.statusEl.style.color = '';
                modalElements.timerEl.textContent = '';
                modalElements.modal.classList.add('active');

                try {
                    const response = await fetch(`${backendUrl}payment`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            productId,
                            email,
                            referralCode,
                            agentCode
                        })
                    });
                    const data = await response.json();

                    if (!data.success || !data.qrCodeUrl) {
                        throw new Error(data.message || 'Failed to get QR code');
                    }

                    modalElements.qrcodeContainer.innerHTML = '';
                    const qr = qrcode(0, 'L');
                    qr.addData(data.qrCodeUrl);
                    qr.make();
                    modalElements.qrcodeContainer.innerHTML = qr.createImgTag(8);

                    const outTradeNo = data.outTradeNo;
                    const PAYMENT_TIMEOUT_DURATION = 5 * 60 * 1000;

                    statusInterval = setInterval(async () => {
                        try {
                            const statusRes = await fetch(`${backendUrl}check-status?outTradeNo=${outTradeNo}`);

                            // æ£€æŸ¥å“åº”çŠ¶æ€
                            if (!statusRes.ok) {
                                console.error(`Check status failed with status: ${statusRes.status}`);
                                return; // ç»§ç»­è½®è¯¢ï¼Œä¸åœæ­¢
                            }

                            // æ£€æŸ¥å“åº”å†…å®¹ç±»å‹
                            const contentType = statusRes.headers.get('content-type');
                            if (!contentType || !contentType.includes('application/json')) {
                                console.error('Check status returned non-JSON response');
                                return; // ç»§ç»­è½®è¯¢ï¼Œä¸åœæ­¢
                            }

                            const statusData = await statusRes.json();

                            if (statusData.status === 'completed') {
                                stopAllTimers();
                                modalElements.modal.classList.remove('active');

                                const parts = productId.split('_');

                                let productBaseKey = parts[0];
                                if (productId.includes('renewal')) {
                                    productBaseKey = 'gmaps_renewal';
                                } else if (productId.includes('whatsapp-validator')) {
                                    productBaseKey = 'whatsapp-validator';
                                }

                                const plan = parts[parts.length - 1];

                                // åœ¨è¿™é‡Œé‡æ–°è·å–ä»·æ ¼å¹¶è®¡ç®—äººæ°‘å¸é‡‘é¢
                                const planDetails = plans[productBaseKey] && plans[productBaseKey][plan] ? plans[productBaseKey][plan] : null;
                                let cnyPrice = 'N/A';
                                if (planDetails && planDetails.price) {
                                    cnyPrice = (parseFloat(planDetails.price) * USD_TO_CNY_RATE).toFixed(2);
                                }

                                openSuccessModal({
                                    orderId: outTradeNo,
                                    product: productId,
                                    plan: plan,
                                    price: cnyPrice,
                                    email: email
                                });
                            } else if (statusData.status === 'error') {
                                console.error('Payment status check error:', statusData.message);
                                stopAllTimers();
                                modalElements.modal.classList.remove('active');

                                // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                                const lang = document.documentElement.lang.startsWith('zh') ? 'zh' : 'en';
                                const errorMessage = lang === 'zh'
                                    ? `æ”¯ä»˜çŠ¶æ€æ£€æŸ¥å¤±è´¥: ${statusData.message || 'æœªçŸ¥é”™è¯¯'}`
                                    : `Payment status check failed: ${statusData.message || 'Unknown error'}`;

                                alert(errorMessage);
                            }
                        } catch (pollError) {
                            console.error('Polling error:', pollError);
                            stopAllTimers();
                        }
                    }, 3000);

                    let timeLeft = PAYMENT_TIMEOUT_DURATION;
                    countdownInterval = setInterval(() => {
                        timeLeft -= 1000;
                        if (timeLeft <= 0) {
                            clearInterval(countdownInterval);
                            modalElements.timerEl.textContent = 'äºŒç»´ç å·²å¤±æ•ˆ';
                            return;
                        }
                        const minutes = Math.floor(timeLeft / (1000 * 60));
                        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                        const formattedTime = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                        const lang = document.documentElement.lang.startsWith('zh') ? 'zh' : 'en';
                        modalElements.timerEl.textContent = lang === 'zh'
                            ? `äºŒç»´ç å°†åœ¨ ${formattedTime} åå¤±æ•ˆ`
                            : `QR code expires in ${formattedTime}`;
                    }, 1000);

                    paymentTimeout = setTimeout(() => {
                        if (modalElements.modal.classList.contains('active')) {
                            const lang = document.documentElement.lang.startsWith('zh') ? 'zh' : 'en';
                            const message = lang === 'zh' ? 'æ”¯ä»˜è¶…æ—¶ï¼Œè®¢å•å·²å…³é—­ã€‚' : 'Payment timed out, order has been closed.';

                            stopAllTimers();
                            modalElements.modal.classList.remove('active');
                            alert(message);
                        }
                    }, PAYMENT_TIMEOUT_DURATION);

                } catch (error) {
                    console.error('Payment Error:', error); // ä¿ç•™æ—¥å¿—ç”¨äºè°ƒè¯•
                    modalElements.modal.classList.remove('active'); // å…³é—­æ”¯ä»˜çª—å£

                    // â–¼â–¼â–¼ ã€æ ¸å¿ƒä¿®æ”¹ã€‘è°ƒç”¨æ–°çš„é”™è¯¯å¼¹çª—å‡½æ•° â–¼â–¼â–¼
                    openErrorModal(error.message);
                }
            }

            // ===================================================================
            // 3. UI æ›´æ–°ä¸äº‹ä»¶ç»‘å®š
            // ===================================================================

            function updateCardUI(cardElement) {
                const lang = document.documentElement.lang.startsWith('zh') ? 'zh' : 'en';
                const priceEl = cardElement.querySelector('.product-price');
                const activePlanBtn = cardElement.querySelector('.plan-btn.active');

                // åªå¯¹æ²¡æœ‰è®¡åˆ’æŒ‰é’®çš„å¡ç‰‡ï¼ˆå¦‚ Google Pluginï¼‰ä½¿ç”¨é™æ€ä»·æ ¼
                // æœ‰è®¡åˆ’æŒ‰é’®çš„å¡ç‰‡ï¼ˆå¦‚ gmaps, validatorï¼‰ä½¿ç”¨åŠ¨æ€å®šä»·
                if (!activePlanBtn && priceEl && priceEl.dataset.priceEn && priceEl.dataset.priceZh) {
                    const staticPrice = lang === 'zh' ? priceEl.dataset.priceZh : priceEl.dataset.priceEn;
                    const periodEl = priceEl.querySelector('.price-period');
                    const period = periodEl ? (lang === 'zh' ? (periodEl.dataset.langZh || '/å¹´') : (periodEl.dataset.langEn || '/year')) : '';
                    priceEl.innerHTML = `${staticPrice}<span class="price-period">${period}</span>`;
                    return; // é™æ€ä»·æ ¼å¡ç‰‡å¤„ç†å®Œæ¯•
                }

                const idMap = {
                    'gmaps-card': 'gmaps',
                    'validator-card': 'validator',
                    'whatsapp-validator-card': 'whatsapp-validator'
                };
                const productId = idMap[cardElement.id];
                if (!productId || !plans[productId]) return;

                // activePlanBtn already declared at function start
                if (!activePlanBtn) return;

                const selectedPlan = activePlanBtn.dataset.plan;
                const planData = plans[productId][selectedPlan];
                if (!planData) return; // Safety check

                // lang and priceEl already declared at function start
                const usdPrice = parseFloat(planData.price);
                const cnyPrice = planData.price_cny ? parseFloat(planData.price_cny) : (usdPrice * USD_TO_CNY_RATE);

                let displayPriceHTML;
                if (lang === 'zh') {
                    displayPriceHTML = `Â¥${cnyPrice.toFixed(2)}<span class="price-period">${planData['period_' + lang]}</span>`;
                } else {
                    displayPriceHTML = `$${usdPrice.toFixed(2)}<span class="price-period">${planData['period_' + lang]}</span>`;
                }
                priceEl.innerHTML = displayPriceHTML;

                const featuresEl = cardElement.querySelector('.product-features');
                const features = planData['features_' + lang];
                featuresEl.innerHTML = features.map(f => `<li><i class='bx bx-check'></i>${f}</li>`).join('');

                // å¤„ç†ä¿ƒé”€æ ‡ç­¾æ˜¾ç¤º/éšè—
                const promoBadge = cardElement.querySelector('.promo-badge');
                if (promoBadge) {
                    if (planData.showPromo) {
                        promoBadge.classList.remove('hidden');
                    } else {
                        promoBadge.classList.add('hidden');
                    }
                }

                const purchaseBtn = cardElement.querySelector('.btn[data-product-id]');
                purchaseBtn.dataset.price = planData.price;

                // æ›´æ–°æŒ‰é’®æ–‡æœ¬
                let btnText;
                if (productId === 'gmaps') {
                    const planTextMap = {
                        monthly: { zh: 'ç«‹å³å¼€é€š(æŒ‰æœˆ)', en: 'Subscribe Monthly' },
                        quarterly: { zh: 'ç«‹å³å¼€é€š(æŒ‰å­£)', en: 'Subscribe Quarterly' },
                        yearly: { zh: 'ğŸ ç«‹å³å¼€é€š(æŒ‰å¹´)', en: 'ğŸ Subscribe Yearly' }
                    };
                    btnText = planTextMap[selectedPlan] ? planTextMap[selectedPlan][lang] : (lang === 'zh' ? 'ç«‹å³å¼€é€š' : 'Subscribe Now');
                } else {
                    const btnTextKey = `btn_text_${selectedPlan}_${lang}`;
                    const btnTexts = {
                        btn_text_standard_zh: 'è´­ä¹°æ ‡å‡†ç‰ˆæ¿€æ´»ç ',
                        btn_text_standard_en: 'Buy Standard License',
                        btn_text_premium_zh: 'è´­ä¹°é«˜çº§ç‰ˆæ¿€æ´»ç ',
                        btn_text_premium_en: 'Buy Premium License',
                    };
                    btnText = btnTexts[btnTextKey] || (lang === 'zh' ? 'ç«‹å³è´­ä¹°' : 'Buy Now');
                }
                purchaseBtn.textContent = btnText;
            }

            // --- æ–°è´­äº§å“å¡ç‰‡çš„äº‹ä»¶ç»‘å®š ---
            const productCards = document.querySelectorAll('.product-card:not(.renewal-section .product-card)');
            productCards.forEach(card => {
                updateCardUI(card);
                card.querySelectorAll('.plan-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        card.querySelector('.plan-btn.active').classList.remove('active');
                        btn.classList.add('active');
                        updateCardUI(card);
                    });
                });


                const purchaseBtn = card.querySelector('.btn[data-product-id]');
                if (!purchaseBtn) return; // Skip cards without purchase button (e.g., google-plugin-card)

                purchaseBtn.addEventListener('click', async (e) => {
                    e.preventDefault();
                    const lang = document.documentElement.lang.startsWith('zh') ? 'zh' : 'en';

                    const productIdBase = purchaseBtn.dataset.productId;
                    const activePlan = card.querySelector('.plan-btn.active').dataset.plan;
                    const productId = `${productIdBase}_${activePlan}`;
                    const emailInput = card.querySelector('input[type="email"]');
                    const email = emailInput.value;

                    if (!email || !email.includes('@')) {
                        alert(lang === 'zh' ? 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€ï¼' : 'Please enter a valid email address!');
                        return;
                    }

                    // è·å–æ¨å¹¿ä¿¡æ¯
                    let referralData = window.getReferralData ? window.getReferralData() : null;
                    if (!referralData) {
                        referralData = restoreReferralFromStorage();
                    }
                    const referralCode = referralData ? referralData.fullCode : null;
                    const agentCode = referralData ? referralData.agentCode : null;

                    if (lang === 'en') {
                        // è‹±æ–‡ç”¨æˆ·ä½¿ç”¨ PayPal æ”¯ä»˜
                        try {
                            purchaseBtn.disabled = true;
                            purchaseBtn.textContent = 'Processing...';

                            const response = await fetch(`${backendUrl}paypal-create-order`, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({
                                    productId,
                                    email,
                                    referralCode,
                                    agentCode
                                })
                            });
                            const data = await response.json();

                            if (data.success && data.approvalUrl) {
                                // è·³è½¬åˆ° PayPal æ”¯ä»˜é¡µé¢
                                window.location.href = data.approvalUrl;
                            } else {
                                alert(data.message || 'Failed to create PayPal order. Please try again.');
                                purchaseBtn.disabled = false;
                                purchaseBtn.textContent = 'Buy Now';
                            }
                        } catch (error) {
                            console.error('PayPal error:', error);
                            alert('Payment service error. Please try again later.');
                            purchaseBtn.disabled = false;
                            purchaseBtn.textContent = 'Buy Now';
                        }
                    } else {
                        // ä¸­æ–‡ç”¨æˆ·ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜
                        const modalElements = {
                            modal: document.getElementById('payment-modal'),
                            qrcodeContainer: document.getElementById('qrcode'),
                            statusEl: document.getElementById('payment-status'),
                            timerEl: document.getElementById('payment-timer')
                        };
                        await processPayment(productId, email, modalElements, referralCode, agentCode);
                    }
                });
            });

            // --- å¼¹çª—å…³é—­äº‹ä»¶ç»‘å®š ---
            document.querySelectorAll('.modal-close-btn, .modal, #success-confirm-btn, #error-confirm-btn').forEach(el => {
                el.addEventListener('click', (e) => {
                    if (e.target === el) { //ç¡®ä¿åªåœ¨ç‚¹å‡»èƒŒæ™¯æˆ–æŒ‡å®šæŒ‰é’®æ—¶å…³é—­
                        stopAllTimers();
                        closeAllModals();
                    }
                });
            });
            document.querySelectorAll('.modal-box').forEach(box => {
                box.addEventListener('click', e => e.stopPropagation()); //é˜»æ­¢ç‚¹å‡»å¼¹çª—å†…å®¹åŒºåŸŸå…³é—­å¼¹çª—
            });

            // --- è¯­è¨€åˆ‡æ¢äº‹ä»¶ç›‘å¬ ---
            function updateAllProductCards() {
                const cards = document.querySelectorAll('.product-card:not(.renewal-section .product-card)');
                cards.forEach(card => updateCardUI(card));
            }

            // ç›‘å¬è¯­è¨€åˆ‡æ¢
            const productObserver = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'lang') {
                        updateAllProductCards();
                    }
                });
            });

            // å¼€å§‹è§‚å¯Ÿdocument.documentElementçš„langå±æ€§å˜åŒ–
            productObserver.observe(document.documentElement, {
                attributes: true,
                attributeFilter: ['lang']
            });

            // åˆå§‹åŒ–æ—¶ä¹Ÿæ›´æ–°ä¸€æ¬¡
            updateAllProductCards();

            // â–¼â–¼â–¼ ã€æ–°å¢ã€‘ä¸ºè”ç³»æˆ‘ä»¬å¼¹çª—ç»‘å®šç‹¬ç«‹çš„å…³é—­äº‹ä»¶ â–¼â–¼â–¼
            const contactModal = document.getElementById('contact-modal-container');
            const contactCloseBtn = document.getElementById('contact-modal-close-btn');
            const contactFab = document.getElementById('contact-fab');

            if (contactFab && contactModal) {
                // æ‰“å¼€å¼¹çª—çš„é€»è¾‘ (å¯èƒ½å·²åœ¨ main.js ä¸­ï¼Œä½†ä¸ºç¡®ä¿åŠŸèƒ½å®Œæ•´ï¼Œåœ¨æ­¤å¤„ä¹Ÿæ·»åŠ )
                contactFab.addEventListener('click', () => {
                    contactModal.classList.add('active');
                });
            }

            if (contactModal && contactCloseBtn) {
                // å…³é—­å¼¹çª—çš„é€»è¾‘
                contactCloseBtn.addEventListener('click', () => {
                    contactModal.classList.remove('active');
                });
            }

            // â–¼â–¼â–¼ ã€æ–°å¢ã€‘è°·æ­Œæ’ä»¶è·å®¢ - è”ç³»å®¢æœæŒ‰é’®äº‹ä»¶ç»‘å®š â–¼â–¼â–¼
            const pluginContactBtn = document.getElementById('contact-plugin-btn');
            if (pluginContactBtn && contactModal) {
                pluginContactBtn.addEventListener('click', () => {
                    contactModal.classList.add('active');
                });
            }
        });

        // æ¨å¹¿ä¿¡æ¯æ¢å¤å‡½æ•°
        function restoreReferralFromStorage() {
            try {
                // ä»localStorageæ¢å¤
                const storedData = localStorage.getItem('æ™ºè´¸äº‘æ¢¯_referral_data');
                if (storedData) {
                    const parsed = JSON.parse(storedData);
                    // æ£€æŸ¥æ•°æ®æ˜¯å¦è¿‡æœŸï¼ˆ30å¤©ï¼‰
                    const storedTime = new Date(parsed.storedAt);
                    const now = new Date();
                    const daysDiff = (now - storedTime) / (1000 * 60 * 60 * 24);

                    if (daysDiff <= 30 && parsed.referralData) {
                        console.log('ä»localStorageæ¢å¤æ¨å¹¿ä¿¡æ¯:', parsed.referralData);
                        return parsed.referralData;
                    }
                }

                // ä»Cookieæ¢å¤
                const cookieData = getCookie('æ™ºè´¸äº‘æ¢¯_referral_data');
                if (cookieData) {
                    const parsed = JSON.parse(decodeURIComponent(cookieData));
                    const storedTime = new Date(parsed.storedAt);
                    const now = new Date();
                    const daysDiff = (now - storedTime) / (1000 * 60 * 60 * 24);

                    if (daysDiff <= 30 && parsed.referralData) {
                        console.log('ä»Cookieæ¢å¤æ¨å¹¿ä¿¡æ¯:', parsed.referralData);
                        return parsed.referralData;
                    }
                }
            } catch (error) {
                console.error('æ¢å¤æ¨å¹¿ä¿¡æ¯å¤±è´¥:', error);
            }
            return null;
        }

        // è·å–Cookieçš„è¾…åŠ©å‡½æ•°
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
            return null;
        }

        // ç›‘å¬è¯­è¨€åˆ‡æ¢äº‹ä»¶ï¼Œæ›´æ–°ç»­è´¹é€‰é¡¹çš„æ˜¾ç¤ºæ–‡æœ¬
        function updateRenewalOptions() {
            const lang = document.documentElement.lang.startsWith('zh') ? 'zh' : 'en';
            const durationSelect = document.getElementById('renewal_duration');

            if (durationSelect) {
                const options = durationSelect.querySelectorAll('option');
                options.forEach(option => {
                    const langAttr = `data-lang-${lang}`;
                    const langText = option.getAttribute(langAttr);
                    if (langText) {
                        option.textContent = langText;
                    }
                });
            }
        }

        // ç›‘å¬è¯­è¨€åˆ‡æ¢
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'attributes' && mutation.attributeName === 'lang') {
                    updateRenewalOptions();
                }
            });
        });

        // å¼€å§‹è§‚å¯Ÿdocument.documentElementçš„langå±æ€§å˜åŒ–
        observer.observe(document.documentElement, {
            attributes: true,
            attributeFilter: ['lang']
        });

        // åˆå§‹åŒ–æ—¶ä¹Ÿæ›´æ–°ä¸€æ¬¡
        updateRenewalOptions();
    </script>
</body>

</html>